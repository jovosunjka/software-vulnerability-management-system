import { Injectable } from '@angular/core';

// import * as jsonData from 'E:/STUDIRANJE/DIPLOMSKI RAD/project_workspace/stara-frontend/src/assets/config/graphic-elements.json';
// import * as jsonData from 'src/assets/config/stencils.json';
import { Stencil } from 'src/app/shared/model/stencil';
import { Template } from '../../model/template';
// zahvaljujuci tome sto je dodat fajl naziv_projekta/json=typings.d.ts,
// mozemo ovako importovati json fajl

@Injectable({
  providedIn: 'root'
})
export class StencilsConfigService {

  // private data: any = jsonData;

  constructor() {}

  async getStencils(templateId: string): Promise<Stencil[]> {
    // this.http.get('assets/text.txt', {responseType: 'text'}).subscribe(data => console.log(data))
    const obj1: any = await import('src/assets/config/templates.json');

    let templateIdToUse;
    if (!templateId || templateId === '') {
      templateIdToUse = obj1.defaultTemplate;
    } else {
      templateIdToUse = templateId;
    }
    const templateToUse: Template = obj1.templates.filter(t => t.id === templateIdToUse)[0];
    const obj: any = await import('src/assets/config/templates/' + templateToUse.fileName);
    const promiseObj: Promise<Stencil[]> = Promise.resolve(obj.stencils);
    return promiseObj;
      // return this.data.default.stencils;
  }

  async getTemplates(): Promise<Template[]> {
    const obj: any = await import('src/assets/config/templates.json');
    const promiseObj = Promise.resolve(obj.templates);
    return promiseObj;
  }

}
